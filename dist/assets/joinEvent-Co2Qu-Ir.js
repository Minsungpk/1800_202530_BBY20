import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{initializeApp as S}from"https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";import{getAuth as $,onAuthStateChanged as C}from"https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";import{getFirestore as b,doc as l,getDoc as v,setDoc as f,query as H,collection as E,orderBy as P,getDocs as m,onSnapshot as T}from"https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore.js";const A={apiKey:"AIzaSyDD_2z29qDHPVXeSXyZ0T9VO_n_PcW1EqU",authDomain:"group-project-8a6ee.firebaseapp.com",projectId:"group-project-8a6ee",storageBucket:"group-project-8a6ee.firebasestorage.app",messagingSenderId:"922685674876",appId:"1:922685674876:web:6edeac0ff4fb485db780f9",measurementId:"G-1LCVJ62HEL"},h=S(A),a=b(h),I=$(h);let n=null;const j=document.getElementById("eventsList");C(I,async r=>{if(r){n=r;const c=l(a,"users",n.uid);(await v(c)).exists()||(await f(c,{createdAt:new Date,email:n.email}),console.log("User document created for:",n.uid)),M()}else j.innerHTML="<p>Please log in to join events.</p>"});async function M(){if(!n)return;const r=H(E(a,"testEvents"),P("date")),c=await m(r);j.innerHTML="",c.forEach(async g=>{const d=g.data(),o=g.id,L=d.date.toDate().toLocaleString(),t=document.createElement("div");t.className="event-card";const s=document.createElement("p");s.innerHTML="<strong>Participants:</strong> 0";const p=document.createElement("span");p.className="joined-badge",p.textContent="Joined",p.style.display="none";const e=document.createElement("button");e.className="join-btn",e.textContent="Join Event",e.dataset.id=o,t.innerHTML=`
      <h3>${d.name}</h3>
      <p>${d.description}</p>
      <p><strong>Location:</strong> ${d.location.name}</p>
      <p><strong>Date:</strong> ${L}</p>
    `,t.appendChild(s),t.appendChild(p),t.appendChild(e),j.appendChild(t);const u=E(a,`testEvents/${o}/participants`),y=l(a,`testEvents/${o}/participants/${n.uid}`),D=await m(u);s.innerHTML=`<strong>Participants:</strong> ${D.size}`,(await v(y)).exists()&&(e.style.display="none",t.classList.add("joined-card")),e.addEventListener("click",async()=>{try{await f(y,{joinedAt:new Date});const i=l(a,`users/${n.uid}/joinedEvents/${o}`);await f(i,{eventRef:l(a,"testEvents",o),joinedAt:new Date}),e.style.display="none",t.classList.add("joined-card");const w=await m(u);s.innerHTML=`<strong>Participants:</strong> ${w.size}`}catch(i){console.error("Error joining event:",i),alert("Failed to join event. Please try again.")}}),T(u,i=>{s.innerHTML=`<strong>Participants:</strong> ${i.size}`})})}
