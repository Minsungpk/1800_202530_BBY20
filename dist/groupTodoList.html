<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Group To-Do List</title>

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
    crossorigin="anonymous"
  />

  <!-- Font Awesome -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />

  <!-- Custom CSS -->

  <script type="module" crossorigin src="/assets/groupTodoList-CvNw_VW6.js"></script>
  <link rel="modulepreload" crossorigin href="/assets/modulepreload-polyfill-B5Qt9EMX.js">
  <link rel="modulepreload" crossorigin href="/assets/firebaseConfig-xSN_xHYb.js">
  <link rel="modulepreload" crossorigin href="/assets/logout-CMZ6WfQS.js">
  <link rel="stylesheet" crossorigin href="/assets/groupTodoList-C3BBuoey.css">
  <link rel="stylesheet" crossorigin href="/assets/style-HP4BJ-1-.css">
</head>

<body class="bg-light">

  <main class="container py-5">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-10">
          <!-- Page Header -->
          <div class="page-header">
            <div
              class="d-flex justify-content-between align-items-start flex-wrap gap-2"
            >
              <div>
                <h1>
                  <i class="fas fa-users"></i>
                  Group To-Do List
                </h1>
                <div class="subtitle">
                  Collaborate with your team and track shared tasks
                </div>
              </div>
              <button id="createGroupBtn" class="btn btn-light">
                <i class="fas fa-plus me-2"></i>Create Group
              </button>
            </div>
          </div>

          <!-- Groups View -->
          <div id="groupsView">
            <div class="d-flex align-items-center justify-content-end mb-3">
              <button
                id="deleteAllGroupsBtn"
                class="btn btn-outline-danger btn-sm"
              >
                <i class="fas fa-trash-alt me-2"></i>Delete All My Groups
              </button>
            </div>
            <div class="groups-container">
              <div id="groupList"></div>
            </div>
          </div>

          <!-- Tasks View -->
          <div id="tasksView">
            <!-- Tasks Header -->
            <div class="tasks-header">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <h3>
                    <i class="fas fa-list-check me-2"></i
                    ><span id="selectedGroupName"></span>
                  </h3>
                  <div class="group-meta-info">
                    <i class="fas fa-users me-1"></i
                    ><span id="selectedGroupMembers"></span>
                  </div>
                </div>
                <div class="d-flex gap-2">
                  <button
                    id="deleteCurrentGroupBtn"
                    class="btn btn-danger"
                    title="Delete this group"
                  >
                    <i class="fas fa-trash me-2"></i>Delete Group
                  </button>
                  <button id="backToGroupsBtn" class="btn back-btn">
                    <i class="fas fa-arrow-left me-2"></i>Back to Groups
                  </button>
                </div>
              </div>
            </div>

            <!-- Add form -->
            <form
              id="addForm"
              class="card add-form-card"
              autocomplete="off"
              novalidate
            >
              <div class="card-body">
                <div
                  id="addFormError"
                  class="alert alert-danger d-none mb-3"
                  role="alert"
                >
                  <i class="fas fa-exclamation-circle me-2"></i>
                  <span id="errorText"></span>
                </div>
                <div class="d-flex gap-2 flex-column flex-lg-row">
                  <input
                    id="todoInput"
                    class="form-control"
                    type="text"
                    placeholder="âœï¸ What needs to be done?"
                  />
                  <input
                    id="todoAssignee"
                    class="form-control"
                    type="text"
                    placeholder="ðŸ‘¤ Assign to (optional)"
                  />
                  <button class="btn btn-primary" type="submit">
                    <i class="fas fa-plus me-2"></i>Add
                  </button>
                </div>
              </div>
            </form>

            <!-- Filters + actions -->
            <div class="filters-bar" id="filtersBar">
              <div class="btn-group" role="group" aria-label="Task filters">
                <input
                  type="radio"
                  class="btn-check"
                  name="filter"
                  id="filter-all"
                  value="all"
                  checked
                />
                <label class="btn btn-outline-secondary" for="filter-all"
                  ><i class="fas fa-list me-2"></i>All Tasks</label
                >
                <input
                  type="radio"
                  class="btn-check"
                  name="filter"
                  id="filter-active"
                  value="active"
                />
                <label class="btn btn-outline-secondary" for="filter-active"
                  ><i class="fas fa-circle-notch me-2"></i>Active</label
                >
                <input
                  type="radio"
                  class="btn-check"
                  name="filter"
                  id="filter-completed"
                  value="completed"
                />
                <label class="btn btn-outline-secondary" for="filter-completed"
                  ><i class="fas fa-check-circle me-2"></i>Completed</label
                >
              </div>
              <button
                id="clearCompleted"
                class="btn btn-outline-danger btn-sm ms-auto"
              >
                <i class="fas fa-trash me-2"></i>Clear Completed
              </button>
            </div>

            <!-- List -->
            <ul id="todoList" class="todo-list" role="list"></ul>

            <!-- Stats Footer -->
            <div class="stats-footer" id="statsContainer">
              <span id="stats"
                ><i class="fas fa-info-circle me-2"></i>No tasks yet. Add one to
                get started!</span
              >
            </div>
          </div>

          <!-- Create Group Modal -->
          <div
            id="createGroupModal"
            style="
              display: none;
              position: fixed;
              inset: 0;
              background: rgba(0, 0, 0, 0.4);
              z-index: 1050;
              align-items: center;
              justify-content: center;
            "
          >
            <div
              style="
                background: #fff;
                border-radius: 12px;
                width: min(400px, 96vw);
                margin: auto;
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
                padding: 2rem;
              "
            >
              <h5 class="mb-3"><i class="fas fa-users"></i> Create Group</h5>
              <div class="mb-3">
                <label for="groupNameInput" class="form-label"
                  >Group Name</label
                >
                <input
                  type="text"
                  id="groupNameInput"
                  class="form-control"
                  placeholder="e.g. Study Buddies"
                />
              </div>
              <div class="mb-3">
                <label for="groupMembersInput" class="form-label"
                  >Members (comma-separated emails)</label
                >
                <input
                  type="text"
                  id="groupMembersInput"
                  class="form-control"
                  placeholder="friend1@example.com, friend2@example.com"
                />
                <div
                  id="groupMembersError"
                  class="form-text text-danger d-none"
                ></div>
              </div>
              <div class="d-flex gap-2">
                <button id="saveGroupBtn" class="btn btn-primary">
                  Save Group
                </button>
                <button
                  type="button"
                  class="btn btn-outline-secondary"
                  onclick="document.getElementById('createGroupModal').style.display='none'"
                >
                  Cancel
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <template id="todoItemTemplate">
      <li class="todo-item" role="listitem">
        <div class="todo-content">
          <div class="d-flex align-items-center gap-2">
            <input
              class="form-check-input toggle todo-checkbox"
              type="checkbox"
              aria-label="Mark complete"
            />
            <span class="todo-text flex-grow-1"></span>
          </div>
          <div class="todo-meta">
            <span class="todo-assignee"></span>
          </div>
        </div>
        <div class="btn-group-actions">
          <button
            class="btn btn-outline-secondary btn-sm delete"
            type="button"
            title="Delete task"
          >
            <i class="fas fa-trash"></i> Delete
          </button>
        </div>
      </li>
    </template>


  <!-- Footer navigation -->
  <footer class="footer">
    <div class="footer-icon" onclick="window.location.href='landing.html'">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-map-fill" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M16 .5a.5.5 0 0 0-.598-.49L10.5.99 5.598.01a.5.5 0 0 0-.196 0l-5 1A.5.5 0 0 0 0 1.5v14a.5.5 0 0 0 .598.49l4.902-.98 4.902.98a.5.5 0 0 0 .196 0l5-1A.5.5 0 0 0 16 14.5zM5 14.09V1.11l.5-.1.5.1v12.98l-.402-.08a.5.5 0 0 0-.196 0zm5 .8V1.91l.402.08a.5.5 0 0 0 .196 0L11 1.91v12.98l-.5.1z"/>
      </svg>
    </div>

    <div class="footer-icon" onclick="window.location.href='joinEvent.html'">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-compass-fill" viewBox="0 0 16 16">
        <path d="M15.5 8.516a7.5 7.5 0 1 1-9.462-7.24A1 1 0 0 1 7 0h2a1 1 0 0 1 .962 1.276 7.5 7.5 0 0 1 5.538 7.24m-3.61-3.905L6.94 7.439 4.11 12.39l4.95-2.828 2.828-4.95z"/>
      </svg>
    </div>

    <div class="footer-icon" onclick="openSheet()">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill" viewBox="0 0 16 16">
        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z"/>
      </svg>
    </div>

    <div class="footer-icon" onclick="window.location.href='statistics.html'">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bar-chart-line-fill" viewBox="0 0 16 16">
        <path d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1z"/>
      </svg>
    </div>
    
    <div class="footer-icon" onclick="window.location.href='profile.html'">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
        <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
      </svg>
    </div>
  </footer>

  <!-- Bottom sheet (create menu) -->
  <div id="bottomSheet" class="bottom-sheet">
    <div class="sheet-content">
      <button class="close-btn" onclick="closeSheet()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
          <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
        </svg>
      </button>

      <h5 class="sheet-title">Create</h5>

      <button class="sheet-btn" onclick="window.location.href='todolist.html'">
        To-Do List
      </button>

      <button class="sheet-btn" onclick="window.location.href='groupTodoList.html'">
        Group To-Do List
      </button>

      <button class="sheet-btn" onclick="window.location.href='launchevent.html'">
        Events
      </button>
    </div>
  </div>

  <!-- Bottom-sheet behaviour -->
  <script src="/bottom-window.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
